# 网络聊天室

> **尚未完成，临时版本**


## 目录结构

## sqlite数据库

### 介绍
SQLite 是一种嵌入式关系型数据库管理系统（RDBMS），它在一个单一的、自包含的文件中实现了一个完整的、独立的 SQL 数据库引擎。与传统的客户端-服务器数据库管理系统不同，SQLite 不需要一个单独的服务器进程来管理数据库，而是直接将数据库存储在磁盘上的文件中。

注意：
- 系统命令：是以`.`开头的命令，主要用于对当前数据库操作
- 普通命令：是以`;`结尾的命令，主要对数据库中的表进行操作

### ubuntu上安装sqlite
```
sudo apt install sqlite3 libsqlite3-dev
```
### sqlite常用命令

```sqlite
.open <name>    打开指定数据库
.schema         查看表的结构
.table          列出当前数据库中所有表
.quit           退出数据库
.exit           退出数据库
.help           查看帮助信息
.databases      查看数据库
```
## 数据库表设计
以下是一个简单的数据库设计方案，用于支持上述功能的实现。请注意，这只是一个示例，您可以根据具体需求进行调整和扩展。

1. 用户表（User）：
   - id: 用户ID (主键)
   - username: 用户名
   - password: 密码（加密存储）
   - email: 电子邮件地址
   - status: 在线状态
   - personal_profile: 个人简介
   - created_at: 创建时间
   - updated_at: 更新时间

2. 好友关系表（Friendship）：
   - id: 关系ID (主键)
   - user_id: 用户ID (外键，关联到User表)
   - friend_id: 好友ID (外键，关联到User表)
   - created_at: 创建时间

3. 群组表（Group）：
   - id: 群组ID (主键)
   - name: 群组名称
   - creator_id: 创建者ID (外键，关联到User表)
   - announcement: 群组公告
   - created_at: 创建时间
   - updated_at: 更新时间

4. 群组成员表（GroupMember）：
   - id: 成员ID (主键)
   - group_id: 群组ID (外键，关联到Group表)
   - user_id: 用户ID (外键，关联到User表)
   - created_at: 加入时间
   - updated_at: 更新时间

5. 消息表（Message）：
   - id: 消息ID (主键)
   - sender_id: 发送者ID (外键，关联到User表)
   - recipient_id: 接收者ID (外键，关联到User表或Group表)
   - content: 消息内容
   - sent_at: 发送时间

## 消息传递
```JSON
{
    "send_id":,     // 发送者id
    "username":,    // 发送者用户名
    "recv_id":,     // 接受者id
    "type":,        // 消息类型
    "msg":          // 消息内容

}
```

## 功能
- [ ] 注册
    - [ ] 用户可以填写必要的信息进行注册。
    - [ ] 系统应该验证注册信息的有效性，如用户名的唯一性、密码的复杂性等。

- [ ] 群聊
    - [ ] 用户可以加入现有的群聊。
    - [ ] 用户可以发送消息到群聊中，供其他成员查看。

- [ ] 私聊
    - [ ] 用户可以选择其他用户进行私聊。
    - [ ] 用户可以发送私聊消息给指定的用户。

- [ ] 添加好友
    - [ ] 用户可以搜索其他用户并添加其为好友。
    - [ ] 用户可以接受或拒绝其他用户的好友请求。

- [ ] 用户资料
    - [ ] 用户可以编辑和更新个人资料信息，例如昵称、个人简介等。
    - [ ] 其他用户可以查看用户的资料信息。

- [ ] 群组管理
    - [ ] 群组创建者可以设置群组的名称、公告、权限等。
    - [ ] 群组创建者可以邀请其他用户加入群组，并管理成员列表。
    - [ ] 群组成员可以退出群组，群组创建者可以移除成员。

- [ ] 消息提醒
    - [ ] 用户可以接收新消息的通知，例如添加好友通知等。 
    - [ ] 用户可以设置消息提醒的方式和级别，例如免打扰模式.

- [ ] 表情和文件发送
    - [ ] 用户可以发送表情符号（如表情符号）来增加聊天的表达力。
    - [ ] 用户可以发送文件（如图片、音频、视频等）给其他用户或群组成员。

- [ ] 在线状态和隐私设置
    - [ ] 用户可以设置自己的在线状态，例如在线、离线、忙碌等。
    - [ ] 用户可以设置隐私选项，例如谁可以看到自己的在线状态、资料等。

- [ ] 历史消息记录
    - [ ] 用户可以查看聊天记录，包括群聊和私聊的历史消息。
    - [ ] 用户可以搜索消息记录，以便快速找到特定的消息内容。

## 待完善功能
- [ ] 用户重新登录后状态会重置为在线
